<!DOCTYPE html>
<html lang="en">
<head>
    {% include '_header.html' %}
    <style>
        h2 {
            text-align: center;
            font-size: 2em;
            margin-bottom: 1em;
        }

        #email-form {
            margin-top: 20px;
            text-align: center;
        }

        #email-input {
            padding: 10px;
            font-size: 1em;
            margin-right: 10px;
            width: 30%;
        }
    </style>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const errorMessage = document.getElementById("error-message");

            $(document).ready(function() {
                $("#submit-email").click(async () => {
                    var email = $("#email-input").val();

                    try {
                        errorMessage.innerText = "";
                        errorMessage.style.display = "none";
                        await register(null, email);
                        window.location.href = "/check-your-email";
                    } catch (e) {
                        errorMessage.innerText = e.message;
                        errorMessage.style.display = "inline";
                    }
                });
            });

            const showcase = document.querySelectorAll(".showcase");

            showcase.forEach(async v0 => {
                const tabButton = v0.querySelectorAll(".tab-button");
                const e_image = v0.querySelector("img");
                const textArea = v0.querySelector("textarea");
                const example = v0.getAttribute("data-example")

                e_image.src = `/static/image/${example}.jpg`
                const path0 = `/static/ocr/${example}.json`
                const r0 = await fetch(path0);
                if (!r0.ok) {
                    const errMessage = `Failed to load file: ${path0}`;
                    textArea.value = errMessage;
                    console.log(errMessage);
                }
                const json = JSON.parse(await r0.text());

                const contentJson = JSON.stringify(json, null, 2);
                const contentText = json.fullTextAnnotation.text;

                tabButton.forEach(btn => {
                    btn.addEventListener("click", () => {
                        tabButton.forEach(v1 => v1.classList.remove("active"));
                        btn.classList.add("active");
                        const type = btn.getAttribute("data-tab");
                        if (type === "text") {
                            textArea.value = contentText;
                        } else if (type === "json") {
                            textArea.value = contentJson;
                        }
                    });
                });
                tabButton.item(0).click();
            });
        });


    </script>
</head>
<body>
{% include '_banner.html' %}
<div class="main-content-f99c33bb">
    <div id="email-form">
        <input type="email" id="email-input" placeholder="Enter your email">
        <button id="submit-email">Get 10 free scans.</button>
        <span id="error-message" class="error hidden"></span>
    </div>

    <div class="showcase" data-example="machine_print">
        <img src="" alt="machine print example">
        <div class="tab-button-container">
            <button class="tab-button active" data-tab="text">Text</button>
            <button class="tab-button" data-tab="json">Json</button>
        </div>
        <textarea class="tab-display" readonly>
            No data yet.
        </textarea>
    </div>

    <div class="showcase" data-example="block_letters">
        <img src="" alt="block letters example">
        <div class="tab-button-container">
            <button class="tab-button active" data-tab="text">Text</button>
            <button class="tab-button" data-tab="json">Json</button>
        </div>
        <textarea class="tab-display" readonly>
            No data yet.
        </textarea>
    </div>

    <div class="showcase" data-example="cursive">
        <img src="" alt="cursive example">
        <div class="tab-button-container">
            <button class="tab-button active" data-tab="text">Text</button>
            <button class="tab-button" data-tab="json">Json</button>
        </div>
        <textarea class="tab-display" readonly>
            No data yet.
        </textarea>
    </div>

    <p class="info-paragraph">
        Hybrid OCR offers top-tier document digitization with a focus on privacy.
        Your scans and text are securely encrypted in your browser, ensuring
        they stay private and protected. While we currently send your scans to
        Google’s highly accurate OCR, we’re developing our own engine that will
        run entirely within your browser—meaning your documents will never leave
        your device. Our goal with Hybrid OCR is that you will be able to digitize
        your documents confidently, knowing that privacy is always a key focus.
    </p>
</div>
{% include '_footer.html' %}
</body>
</html>
